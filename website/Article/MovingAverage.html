<!DOCTYPE html>
<html lang="en">
<head>
   <link rel="icon" href="/favicon.ico" type="image/x-icon">
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Fluid: Data-Linked Visualisations</title>
   <link href="../css/styles.css" rel="stylesheet" type="text/css">
   <link href="../css/view-styles.css" rel="stylesheet" type="text/css">
   <script src="https://kit.fontawesome.com/20cf8b42c0.js" crossorigin="anonymous"></script>
   <script src="../shared/util.js"></script>
   <style>
      :root {
         --text-pane-width: 400px;
      }
      .data-pane {
         max-width: 400px;
      }
   </style>
</head>
<body>
<div id="grid" class="grid-container data-pane-hidden">
   <div></div>
   <div></div>
   <div class="flex-left-align">
      <p>The following chart shows a moving average (or rolling average) plot for methane
      emissions under projected emissions scenario <a
      href="https://en.wikipedia.org/wiki/Shared_Socioeconomic_Pathways">SSP5-8.5</a>. A moving average is
      essentially a <span class="highlight">1-dimensional convolution</span> with a uniform (<a
      href="https://en.wikipedia.org/wiki/Boxcar_function">boxcar</a>) filter. Toggle the <span
      class="highlight">data pane</span> in the margin, and try some of the suggestions there.</p>
   </div>

   <div class="flex-right-align data-pane">
      <p>How are the <code>year</code> values used? (Try to avoid moving your mouse over
      <code>Agriculture</code> &mdash; these nodes currently participate in a lot of dependency edges and so
      the system is <span class="highlight">currently quite laggy</span> if you do this!) You'll see that
      every year is used in both the original curve and its moving average.

      <div id="fig-input"></div>

      <p>Now try <code>emissions</code>. The behaviour here is different: each emissions value contributes to
      <span class="highlight">one</span> point in the original curve but <span class="highlight">three</span>
      in the moving average.</p>

      <p>As with the other examples, you can also interact with the output. This confirms that each point in
      the moving average consumes 3 emissions inputs and 1 year, as one might expect. Interacting with the
      points in the original curve is a bit laggy at the moment.</p>
   </div>
   <div onclick="toggleDataPane('grid')">
      <i class="data-pane-button toggle-button fa-solid fa-eye-slash"></i>
   </div>
   <div class="flex-left-align">
      <div id="fig">
         <div class="fig-loading">loading figure(s)</div>
      </div>
      <h4>From passive to active reading</h4>
      <p>One of our goals is to support comprehension as an <span class="highlight">active inferential
      activity</span>, where the reader not only formulates hypotheses about what they are looking at, but is
      able to actively test those hypotheses via the artifact. In the example above, we can conjecture that
      each moving average point consumes three inputs, representing the “window” for the moving average, and
      test that by interacting with the output. If we could enrich this with additional (intensional)
      information revealing that these three numbers were added together and then divided by three, we would
      be approaching a fully self-explanatory implementation.</p>

      <p>As before, the infrastructure used to execute and host the visualisations provides these interactive
      transparency features automatically. The moving average itself is computed as a pure function of data,
      as shown below:</p>
      <details>
         <summary>moving-average.fld</summary>
         <div id="codemirror-moving-average"></div>
      </details>
   </div>
</div>

<script type="module">
   import { loadFigure } from "../shared/load-figure.js"
   loadFigure("spec.json")()
</script>
</body>
</html>
